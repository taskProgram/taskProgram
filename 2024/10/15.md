## 取り組んだ課題一覧
- progate
  - Ruby on Rails5 I
  - Ruby on Rails5 II 　~5.アクションで変数を定義しようまで 
## わかったこと
①Rails開始時について<br>
Railsで開発を始める際は「rails new アプリケーション名」のコマンドをターミナルで実行。  
このコマンドを実行することで入力したアプリケーション名と同名のフォルダが作成され、その中に開発に必要なフォルダやファイルが用意される。  
開発中のアプリケーションをブラウザで表示するためにはサーバーを起動する必要があり、サーバーの起動は「rails server」というコマンドを実行する。  

②トップページの作成<br>
トップページを作成するには「rails generate controller home top」というコマンドをターミナルで実行。  
「rails generate controller home top」を実行したことで、ページを表示するために必要なファイルが自動で作成され「localhost:3000/home/top」というURLにアクセスできるようになる。  
→TOPページ以外の新規のページを作成の際はコマンドはもう使えない。  
「rails generate controller コントローラ名 アクション名」を実行することでコントローラと、それに対応したファイルが自動で用意される。  
※同じ名前のコントローラがすでにある場合は、このコマンドを使うことはできない。上記の場合、homeコントローラはもう作成されているから使えない。generateは生成するという意味。  

③ビュー、コントローラ、ルーティングについて<br>
- ビューについて
ビューとは、ページの「見た目」を作るためのHTMLファイルのこと。  
ブラウザとRailsのやりとりの中で、Railsからビューが返されページが表示される。ビューはviewsフォルダの中に置かれる。  
「rails generate controller home top」を実行すると、viewsフォルダの中に「homeフォルダ」と「top.html.erb」というファイルが自動で作成される。「erb」は少し特殊なファイル形式だが、HTMLファイルの認識でOK

- コントローラ（アクション）
ページを表示するとき、Railsの中ではコントローラを経由してビューをブラウザに返される。  
「rails generate controller home top」を実行したとき、「home_controller.rb」というコントローラのファイルが作成され、ファイルの中に「topメソッド」が追加される。コントローラ内のメソッドは「アクション」と呼ぶ。  
コントローラ内のアクションはブラウザに返すビューをviewsフォルダの中から見つけ出す役割を担っている。  
アクションはコントローラと同じ名前のビューフォルダからアクションと同じ名前のHTMLファイルを探してブラウザに返す。  
★コントローラ内のメソッド🟰アクション→HIMLのファイル名（今回の場合はviews/home/top.html.erb）

- ルーティング
Rails内ではコントローラを経由してビューを返すが、ブラウザとコントローラを繋ぐ役割を担うのがルーティング。  
ページが表示されるまでに、ルーティング→コントローラ→ビューという順で処理が行われている。  
ルーティングは、送信されたURLに対して「どのコントローラの、どのアクション」で処理するかを決める「対応表」のこと。  
ブラウザでURLを入力するとルーティングがURLを見て適切なコントローラのアクションを呼び出す。  
ルーティングは「config/routes.rb」に定義され、右の図のように「get "URL" => "コントローラー名#アクション名"」という文法で書かれる。  
これにより、ブラウザから「localhost:3000/home/top」というURLが送信されたときに、homeコントローラーのtopアクションで処理される。  
ルーティングに記述されていないURLにはアクセスできない。  
→「localhost:3000」にアクセスすると、「Yay! You're on Rails!」のページが表示される。  
localhost:3000でトップページが表示されるようにする場合、「localhost:3000」 (後ろに/○○がないURL) に対応するルーティングは「get "/" => "コントローラ名#アクション名"」というように、URLに"/"を指定。  
get "/" => "home#top"

④新規でページ作成<br>
新規でページを作成するには対応するルーティングとアクションを追加し、ビュー(about.html.erb)を手動で作成する  
コントローラに記載  
def about  
end  
ルーティングに記載  
get "about" => "home#about"  

⑤CSS<br>
CSSファイルは「app/assets/stylesheets」フォルダに入っている。  
「rails generate controller home ...」コマンドを実行した時にCSSファイル(home.scss)も自動生成される。  
「scss」はCSSを拡張したもので、CSSを効率的に書く文法も使用できる。  
Railsでは、「stylesheets」フォルダの中に保存されているCSSファイルにコードを書けば、すべてのビューにCSSが適用される。

⑥画像について<br>
画像は「public」フォルダに配置しておくと「*<*img src="/画像名"*>*」や「background-image: url("/画像名");」のように画像名を指定するだけで画像を表示することができる。バックグラウンド（背景）の時はCSS、画像を貼り付ける時はhtmlフォルダ。

⑧リンクの作り方<br>
top.html.erbとabout.html.erbのそれぞれでリンクを作成するためには、<a>タグでテキストを囲み「href=" "」の中にURLを指定する必要がある。  
hrefの中身をルーティングのURL部分と同じにすることでリンク先を指定することができる。  

⑨投稿一覧ページとデータベースについて<br>
「投稿」に関するページを作るために、新たに「postsコントローラ」を作成。  
→homeコントローラでも作成することはできるが、投稿に関することは投稿に関するコントローラを作成した方が良い。  
一覧ページを作成する時はindexというアクション名を使用することが一般的なので、indexアクションを用意。  
rails g controller posts index  
※「rails generate controller」は「rails g controller」と省略することができる  
コマンドで以下のルーティング、コントローラ、ビューが生成される  
・ルーティング  
tweet_app/config/routes.rb  
get "posts/index" => "posts#index"というルーティングが追加される  
・コントローラ  
tweet_app/app/controllers/posts_controller.rb  
「app/controllers/posts_controller.rb」内にindexアクションを持ったpostsコントローラが作成されている  
・ビュー  
tweet_app/app/views/posts/index.html.erb  
「app/views/posts/index.html.erb」ビューファイルが作成されている  

⑨変数<br>
index.html.erbのようなerbという形式のファイルでは、以下の図のように<% %>で囲むことで、HTMLファイルの中にRubyのコードを記述することができる。「erb」とは「Embedded Ruby（埋め込みRuby）」の略。  
<% %>の場合は何も表示されないので、変数の定義などに用いる。<%= %>の場合は、Rubyコードの中身が表示されるため、変数の値などを実際にページ内に表示したい場合に用いる。  
→投稿が増えたときに投稿の数だけ変数とHTMLを書かなくてはならない。  
この問題を解決するためにそれぞれの変数を一つの配列にまとめ、配列の中身をeach分で1つずつ取り出す。  
配列を用意(posts)し、配列postsから要素を1つずつ取り出して変数postに代入し表示させる。  
こうすることでpostsの要素の数だけeach文の中身が実行されるので、投稿の数だけHTMLを書く必要がなくなる。  
「posts.each do |post|」の部分と「end」の部分は表示用ではないので、「<%= %>」ではなく「<% %>」で囲むことに注意。  
→繰り返し処理には、each文というものを使う(Ruby手順)  
each文を使い、配列の要素を順番に取り出して処理を行う。each文は「配列.each do |変数名|」と書き「end」までの間に実行したい処理を書く。  
※変数をビューファイル内で定義してきたが、Railsではビューではなく、アクションで定義するのが一般的  
通常、アクションで定義した変数をビューで使用することはできないが、変数名を「@」から始めることで特殊な変数となり、ビューファイルでも使用することができるようになる。  
そのためアクションで定義したビュー用の変数には「@」をつけ忘れないように注意が必要。  

## 次やること
- progate
  - Ruby on Rails5 II
## 感じたこと
- 前回のrailsの学習から時間が空いてしまったため再度学習。一度学習した内容のため詰まることはなかったが忘れている箇所があったため良い復習となった。しばらく仕事の関係で学習に時間がとれていなかったが再度学習を進めていく予定。
## 学習時間
- today 2.5h
- total 35.5h
